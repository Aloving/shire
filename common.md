# Shire

Приложение по учету финансов:

## Встречающееся пометки

(?) - Под вопросом, обсудить
(!) - Обратить внимание

## Функционал

### Основной функционал
- Добавлять доходы;
- Добавлять расходы;
- Показывать настоящий баланс;
- Статистика по периодам;
- Персональные аккаунты (регистрация и авторизация);

### Дополнительный функционал
- Актуальная статистика по дням;

## Общая информация

- Проект направление на получения опыта в проектировании и опыта в react;
- Проект не большой, представляет из себя веб приложение;
- Использование полного стека js;
- Максимально отзывчивый интерфейс;
- Максимальная отказоустойчивость;
- Общая структура проекта;

Не сколько сущностей которые можно выделить:
- Запись, запись дохода / расхода;
- Баланс (Общий, доходы, расходы);

Будет такая сущность как запись, краеугольный камень всего приложения, записи будут:
- Добавляться;
- Удаляться;
- Собираться в периоды;
- Записи можно будет получать;
- Записи будут влиять на балансы;

Балансы:
- Настоящий баланс доходов (будет отображать положительный баланс денег);
- Настоящий баланс расходов (сколько было потрачено сумарно);
- Общий баланс (Баланс за вычетом доходов и расходов);

## По архитектуре

### Backend

Приложение использует стандартный подход MVC, с роутами и контроллерами:
Пользователь со стороны клиента будет "Стучаться" по предоставленным роутам (В дальнейшем ручки), получать с них нужные данные и таким образом обеспечивать функционал веб - приложения.

Примерно следующим образом это будет выглядить:
Пользователь дергает ручку =>

Приложение на node.js получает запрос =>

Уведомляет об этом контроллер =>

Контроллер проводит манипуляции с моделью =>

Отвечает пользователю этими данными;

Подробное описание подхода по ссылке ниже:

https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/routes

Роуты:
https://github.com/Aloving/shire/blob/master/routes.md

#### Инструменты и подходы и их обоснования
- Koa.js
  Можно использовать и альтернативный вариант express.js, не сколько пунктов за koa.js
  - Сильный механизм middleware, которые могут сильно пригодиться и облегчить работу;
  - Общее знакомство с koa.js, что может пригодиться в будущем;

- Испольнование стандартного подхода MVC
  Подход полностью покрывает нужный функционал, данный подход можно использовать как с небольшими приложениями, так и с большими. MVC хорошо подходит для веб приложений, легко понимаем, легко читаем, etc...
  
- MongoDB (mongoose.js);
  Нет каких-то точных обоснований этому, используется потому-что имеется опыт с этим;

#### Роуты
В качестве роутера будет использоваться [koa.js router](https://github.com/alexmingoia/koa-router)
Механизм роутов понятен и прозрачен, приложение использует самый стандартный подход роутов, работает следующим образом:

Пользователь "дергает" роут, роут уведмоляет об этом контроллер или метод контроллера, с контроллера возвращается ответ;

Для роутов будут использоваться следующие методы:

Метод  | Назначение
-------- | ---
del | Удаление
put | Добавление
patch | Обновление
get | Получение
post | Может использоваться в тех ситуациях когда не один из методов выше не подошел

#### Контроллеры
> **BaseControl:**

> Базовый контроллер, представляет из себя класс с базовым набором методов которым обладает каждый контроллер,
> Базовы контроллер подходит как для наследования так и для создания инстансов;

Примерная структура BaseController:

```javascript
class BaseController {
  validate(){}
}
```

> **CRUD Controller:**

> Контроллер который представляет из себя что-то вроде абстрактного класса;
> CRUD расширяет BaseControl и имеет все теже мтеоды что остальные контроллеры;
> Достаточно спорно, является ли в этом случае класс абстрактным;
> CRUD контроллер описывает функционал: Create, Read, Update, Delete
> Не содержит собственной реализации этих методов;

Примерная структура CRUD Controller:

```javascript
class CRUDController extends BaseController {
  create(){}
  read(){}
  update(){}
  delete(){}
}
```

> **Router Controlls:**

> Контроллер который будет создавать отдель под каждый роут или какую-то бизнес задачу;
> Например ExpensesController обрабатывает операции по созданию, получению, удалению, обновлению
> записей связанных с затратами в своих методах;
> Контроллер в некоторых случаях, когда это необходимо, экстендится от CRUD Controller;


Что еще стоит рассмотреть:
- Вариант с валидацией входящих данных, делать валидацию отдельным методом контроллера или каким-либо еще способом;
- Написать абстрактный класс для контроллеров;
- Привести ответ с node.js к единому формату (ошибка и правильный ответ);
- Авторизация, делать авторизацию собственными силами или использовать готовые решения?;
- Написать слой для взаимодействия с записями (получени за периоды, добавление);

